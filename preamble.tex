%%%%%%%%%%%%%%%%%%
% 标题左对齐
%\usepackage[raggedright]{titlesec}
% 页边距设置
% marginpar=2cm解决margin note在ctex book下无法留出足够空白问题
% 标准的16开，适合于计算机类图书出版
\usepackage[paperheight=260mm, paperwidth=185mm, marginpar=2cm,top=3cm,bottom=2.5cm,left=2.5cm,right=2.5cm]{geometry}
% A4版本，适合打印
%\usepackage[paperheight=297mm, paperwidth=210mm, marginpar=2cm,top=1.65cm,bottom=1.65cm,left=2cm,right=2cm]{geometry}
% 页眉页脚设置
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}                                                  % 清空页眉页脚
\fancyhead[LE,RO]{\thepage}                                 % 偶数页左,奇数页右
\fancyhead[RE]{\leftmark}                                   % 偶数页右
\fancyhead[LO]{\rightmark}                                  % 奇数页左
\fancypagestyle{plain}{
    \fancyhf{}                                                  % 重定义plain页面样式
    \renewcommand{\headrulewidth}{0pt}
}
% 重新设置fancyhdr的headheight，避免报告Package Fancyhdr Warning: \headheight is too small (12.0pt)
\setlength{\headheight}{14pt} 
% 每章的开头显示名言警句
\usepackage{epigraph}

\AtBeginDocument{\renewcommand\lstlistingname{代码清单}}
\AtBeginDocument{\renewcommand\tablename{表}}
\AtBeginDocument{\renewcommand\figurename{图}}
\AtBeginDocument{\renewcommand\listfigurename{图~目~录}}
\AtBeginDocument{\renewcommand\listtablename{表~目~录}}
\AtBeginDocument{\newcommand\sectionname{节}}
\AtBeginDocument{\providecommand\exercisename{练习}}
\AtBeginDocument{\providecommand\examplename{例}}
\AtBeginDocument{\providecommand\solutionname{解答}}
\AtBeginDocument{\renewcommand\appendixname{附录}}
\AtBeginDocument{\renewcommand\partname{部分}}
\AtBeginDocument{\renewcommand*{\lstlistlistingname}{示例代码列表}}

\usepackage{varioref} % 为了防止refxxx没有定义错误
\AtBeginDocument{\renewcommand\reftextfaraway[1]{[在第~\pageref{#1}页]}}
\AtBeginDocument{\renewcommand\reftextbefore{[在上一页]}}
\AtBeginDocument{\renewcommand\reftextafter{[在下一页]}}
\AtBeginDocument{\renewcommand\reftextcurrent{[在本页]}}
\AtBeginDocument{\renewcommand\reftextfaceafter{[在对页]}}
\AtBeginDocument{\renewcommand\reftextfacebefore{[在对页]}}

\usepackage{listings}
\usepackage{color}
\definecolor{colBg}{rgb}{1,1,1} % 白色，便于打印输出，不会和code remarks冲突
\definecolor{colKeys}{rgb}{0,0,1}
\definecolor{colIdentifier}{rgb}{0,0,0}
\definecolor{colComments}{rgb}{0.06,0.05,0.03} % 重色便于打印输出，红色打印出来会很模糊
\definecolor{colString}{rgb}{0,0.5,0}
\lstset{%
    language=Java,%
    float=hbp,%
    basicstyle=\footnotesize\ttfamily,%
    identifierstyle=\color{colIdentifier},%
    keywordstyle=\color{colKeys},%
    stringstyle=\color{colString},%
    commentstyle=\itshape\color{colComments},%
    columns=fixed,
    tabsize=4,%
    frame=tb,% 顶部和底部加横线
    %frame=shadowbox,
    framerule=1pt,
    showspaces=false,%
    showstringspaces=false,%不显示代码字符串中间的空格标记
    %framexleftmargin=2em, % 行号包含在代码区域内
    %numbers=left,%左侧显示行号
    numberstyle=\tiny\ttfamily,%
    numbersep=1em,%
    breaklines=true,% 对过长的代码自动换行
    breakindent=10pt,%
    backgroundcolor=\color{colBg},%
    breakautoindent=true,%
    %escapebegin=\begin{CJK*}{GBK}{hei},escapeend=\end{CJK*},
    aboveskip=1em, %代码块边框
    captionpos=t,%
    %% added by http://bbs.ctex.org/viewthread.php?tid=53451
    %fontadjust,
    xleftmargin=1em, xrightmargin=\fboxsep,%设定listing左右的空白
    %texcl=true,
    % 设定中文冲突，断行，列模式，数学环境输入，listing数字的样式
    extendedchars=false,columns=flexible,
    %mathescape=true, % 启用后貌似没法在代码中使用特殊字符，比如$
    escapechar=|
} 

